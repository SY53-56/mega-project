import{r,u as h,a as m,o as x,h as u,s as p,j as e,L as n}from"./index-BlRRyZwi.js";import{H as v}from"./heart-DKD29j9l.js";const N=r.memo(function({blog:s}){const i=h(),{user:t}=m(a=>a.auth);console.log("blog",s);const l=t?s?.like?.includes(t._id):!1,o=t?.saveBlogs?.some(a=>a._id===s._id)||!1;console.log("user",o),console.log("userbbdadf",t);const c=r.useCallback(()=>{if(!t)return alert("Login first");i(x(s._id)).then(()=>i(u(s._id)))},[i,s._id,t]),d=r.useCallback(a=>{if(a.preventDefault(),a.stopPropagation(),!t)return alert("Login first");i(p(s._id)).then(()=>alert("blog saved"))},[i,t,s._id]);return e.jsxs("div",{className:"bg-white rounded-3xl shadow-md hover:shadow-2xl transition-all duration-300 overflow-hidden group relative",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx(n,{to:`/userpage/${s._id}`,children:e.jsx("img",{src:s.image?.[0],alt:s.title,className:"w-full h-60 object-cover group-hover:scale-110 transition duration-500"})}),e.jsx("button",{onClick:d,className:"absolute top-3 right-3 cursor-pointer z-20 opacity-0 group-hover:opacity-75 bg-white/90 hover:bg-gray-300 p-2 rounded-md shadow-md transition-all duration-300",children:o?"Saved":"Save"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-90 pointer-events-none"}),e.jsx(n,{to:`/userpage/${s._id}`,children:e.jsx("h2",{className:"absolute bottom-4 left-4 right-4 text-white text-xl font-bold line-clamp-2",children:s.title})})]}),e.jsxs("div",{className:"p-5 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.author?.image||"https://via.placeholder.com/150",alt:"author",className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:s.author?.username||"Unknown"}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date(s.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx(n,{to:`/userpage/${s._id}`,className:"text-sm font-semibold text-indigo-600 hover:underline",children:"Read more â†’"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{size:16,onClick:c,className:`cursor-pointer active:scale-90 ${l?"text-red-500":"text-gray-700"}`}),e.jsx("span",{className:"text-sm",children:s.like?.length||0})]})]})]})]})});export{N as B};
